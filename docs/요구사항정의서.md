# 요구사항 정의서 (프론트엔드 역산)

| ID | 요구사항명 | 기능 | 상세 설명 | 필수데이터 | 선택데이터 | 구분 |
|----|------------|------|------------|------------|------------|------|
| RE-U01 | 통합 로그인 화면 | 미로그인 시 최초 진입 화면 제공 | NEURALEYE 브랜딩, 배경/그리드 효과, 아이디·비밀번호 입력 필드, "시스템 접속" 제출 버튼, 접속 경고 문구 표시 | id, password, onLogin | - | UI |
| RE-U02 | 로그인 폼 제출 시 로딩 표시 | 제출 중 버튼 비활성화 및 스피너 표시 | handleSubmit에서 setIsLoading(true), 1.5초 후 onLogin() 호출 시까지 스피너 노출 | isLoading | id, password | UI |
| RE-U03 | 사이드바 네비게이션 | 로그인 후 좌측 메뉴로 화면 전환 | 도시 관제/AI 정밀 추적/시스템 설정 메뉴, 활성 메뉴 하이라이트, 접이식(폭 전환), 브랜드·사용자 영역 표시 | currentView, setCurrentView, isCollapsed, toggleSidebar, onLogout | - | UI |
| RE-U04 | 사이드바 사용자 메뉴 | 로그아웃 및 설정 진입 | 하단 사용자 아바타 클릭 시 드롭다운(내 정보 확인→설정 뷰, 로그아웃), 외부 클릭 시 닫힘(menuRef + mousedown) | showUserMenu, menuRef, onLogout, setCurrentView | - | UI |
| RE-U05 | 메인 뷰 전환 | 선택한 메뉴에 따른 본문 표시 | currentView 값에 따라 CityOverview / AIInvestigation / 시스템 설정 플레이스홀더 중 하나만 렌더 | currentView | - | UI |
| RE-U06 | 시스템 설정 플레이스홀더 | 설정 화면 임시 UI | "시스템 설정", "관리자 권한 필요" 문구, 문서 보기·고객 지원 문의 버튼(동작 미구현) | - | - | UI |
| RE-U07 | 도시 관제 지도 화면 | 카카오 지도 기반 통합 현황판 | id="city-map" 컨테이너에 Kakao Map 초기화(서울 시청 중심, level 3), 교통 레이어(TRAFFIC) 표시 | window.kakao.maps | - | UI |
| RE-U08 | 도시 관제 교통 지표 위젯 | 지도 위 좌측 상단 부유 패널 | 평균 속도 게이지(42 km/h), 교통 혼잡도/교통량 프로그레스 바, 교통량 추이 AreaChart(volumeData), "실시간" 표시 | volumeData(목업) | - | UI |
| RE-U09 | 도시 관제 실시간 경보 위젯 | 지도 위 좌측 하단 부유 패널 | incidents 목록(차량 충돌/도로 공사/안개 등), 유형별 아이콘·제목·위치·시간, 스크롤 가능 | incidents(목업) | - | UI |
| RE-U10 | 도시 관제 날씨/상태 필 | 지도 우측 상단 필 | 풍속(14 km/h), 습도(62%) 등 상태 필 표시(목업) | - | - | UI |
| RE-U11 | AI 정밀 추적 레이아웃 | 지도 영역 + 우측 패널 구조 | 좌측 flex-1 지도 영역, 우측 400px 고정 패널(헤더·입력·스트림·선택 CCTV 안내) | mapRef, mapAreaRef | - | UI |
| RE-U12 | AI 정밀 추적 지도 | 카카오 지도 + 교통 레이어 | #ai-map에 Map 생성(서울 중심, level 6), TRAFFIC 오버레이, zoom/center/bounds 변경 시 픽셀 위치 갱신 | mapRef, camerasRef | - | UI |
| RE-U13 | 지점 선택 안내 배너 | 분석 후 지도 클릭 유도 | isSelectingPoint일 때 하단 중앙 "지도에서 추적할 지점을 클릭하세요" 배너 표시(pointer-events-none으로 지도 조작 가능) | isSelectingPoint | - | UI |
| RE-U14 | 클릭 지점 리플 애니메이션 | 선택 지점 시각화 | rippleCenter 기준 3개 동심원 그라데이션, map-point-ripple 키프레임 애니메이션 | rippleCenter | - | UI |
| RE-U15 | CCTV 아이콘 오버레이 | 지도 위 CCTV 마커 표시 | displayedCameraIds에 해당하는 camera만 픽셀 좌표로 아이콘 렌더, 호버/클릭 시 라벨 말풍선, selectedCctvIds면 초록 테두리(ring-2) | markerPixels, displayedCameraIds, selectedCctvIds, openInfoId | selectedCams | UI |
| RE-U16 | 범위 원 표시 | 선택 지점 기준 반경 시각화 | Kakao Circle로 클릭 지점 중심, 최근접 9대 최대 거리*1.05 반경, 시안색 테두리·채우기 | circleRef, clickedPin, nearest9 | - | UI |
| RE-U17 | CCTV 9화면 오버레이 | 지도/9화면 전환 뷰 | viewMode==='cctv'이고 selectedCctvList 있을 때 지도 영역 전체를 3×3 그리드 placeholder로 덮음, "Ctrl+` · 지도 보기" 안내 | viewMode, selectedCctvList | - | UI |
| RE-U18 | AI 스마트 검색 입력 영역 | 자연어 쿼리 + 분석 실행 | textarea(query), "분석 및 추적" 버튼, 분석 중 비활성·스피너, NLP MODEL V4.2 라벨 | query, isAnalyzing | - | UI |
| RE-U19 | 현재 지점에서 CCTV 찾기 버튼 | 보이는 지도 범위 내 CCTV만 표시 | 헤더 아래 버튼 클릭 시 현재 지도 bounds 내 cameras만 displayedCameraIds로 설정 | mapRef, camerasRef | - | UI |
| RE-U20 | 선택 CCTV · 단축키 안내 | Ctrl+` 전환 안내 | selectedCctvIds.size>0일 때 "선택 CCTV N대", "Ctrl+` → CCTV 화면/지도" 문구 표시 | selectedCctvIds, viewMode | - | UI |
| RE-U21 | 감지 스트림 카드 목록 | 분석 결과 카드 표시 | results 배열을 카드로 표시(썸네일·번호판·매칭률·차종·위치), cctvId 있으면 "클릭 시 해당 CCTV 중심" 문구, 카드 클릭 시 handleResultClick | results, cctvId | openInfoId | UI |
| RE-U22 | 감지 스트림 빈 상태 | 결과 없을 때 안내 | results.length===0이고 !isAnalyzing일 때 Shield 아이콘 + "시스템 준비 완료..." 문구 | results, isAnalyzing | - | UI |
| RE-U23 | 실시간 모니터링 그리드 | 다중 CCTV 영상 그리드 | CAMERAS 목록을 2열 그리드로 표시, 각 셀에 이미지·카메라명·REC 정보·전체화면 버튼, detections 바운딩 박스(target=빨강/ALERT, 그 외=초록) | CAMERAS(목업) | - | UI |
| RE-U24 | 실시간 이벤트 로그 패널 | 우측 이벤트 스트림 | "Real-time Events" 헤더, Export Log 버튼(미연동), logs 리스트(시간·번호판·차종·색상·위치·target 강조) | logs | - | UI |
| RE-U25 | 감지 이력 검색/필터 영역 | 이력 화면 상단 필터 | 번호판 검색 input, 날짜 input, 카메라 select, 색상 select, 테이블/그리드 전환 버튼, Export CSV 버튼(미연동) | viewMode, historyData | - | UI |
| RE-U26 | 감지 이력 테이블 뷰 | 이력을 테이블로 표시 | Timestamp/Camera ID/Plate/Model·Color/Confidence(프로그레스 바)/View 컬럼, target 행 빨간 배경·ALERT 뱃지 | historyData(목업) | - | UI |
| RE-U27 | 감지 이력 그리드 뷰 | 이력을 카드 그리드로 표시 | 카드별 썸네일 placeholder·번호판·시간·차종·색상, target 뱃지, 호버 시 "View Full" 버튼(미연동) | historyData, viewMode | - | UI |
| RE-U28 | 감지 이력 페이지네이션 | 목록 하단 페이지 정보 | "Showing 1-8 of 1,293 records", 이전/다음 버튼(클릭 핸들러 미구현) | - | - | UI |
| RE-U29 | 타깃 등록 폼 | 감시 대상 차량 등록 폼 | 번호판·차종 select·색상 선택·소유자(선택)·참조 이미지 업로드 영역, "Add Target" 제출(미연동) | activeTab | - | UI |
| RE-U30 | 워치리스트 테이블 | 등록된 타깃 목록 | Status/Plate/Vehicle Info/Added By/Date Added/Actions 컬럼, 목업 3건, 행 호버 시 Edit·Delete 버튼(미연동) | activeTab, 목업 target 목록 | - | UI |
| RE-U31 | 대시보드 KPI 위젯 | 요약 지표 3종 | Total Vehicles Today, Active Targets Tracked, System Health 수치·아이콘(목업) | - | - | UI |
| RE-U32 | 대시보드 카메라 맵 | Cam Network Map 영역 | 그리드·도로 SVG·카메라 점(online/offline), 호버 시 CAM-ID·status 툴팁(목업) | - | - | UI |
| RE-U33 | 대시보드 교통량 차트 | 24시간 교통량 AreaChart | recharts AreaChart, data(목업), Last 24h 라벨 | data(목업) | - | UI |
| RE-U34 | TopBar (미연동) | 상단 시스템 상태 바 | CPU/GPU 퍼센트, SYSTEM ONLINE, 알림 버튼·사용자 정보(Admin Officer, Security Level 5)(현재 App에서 미사용) | - | - | UI |
| RE-S01 | 로그인 상태에 따른 라우팅 | 로그인 전/후 화면 분기 | isLoggedIn false면 Login만 렌더, true면 Sidebar+main(뷰 전환). 로그인은 onLogin()으로 setIsLoggedIn(true) 호출로 처리(실제 인증 API 없음) | isLoggedIn, onLogin | - | 시스템/BE |
| RE-S02 | 로그인 제출 시뮬레이션 | 로그인 API 대체 동작 | handleSubmit에서 1.5초 setTimeout 후 onLogin() 호출. id/password 검증·전송 로직 없음(미구현) | id, password | - | 시스템/BE |
| RE-S03 | 카카오 지도 SDK 로드 | 도시 관제·AI 추적 지도 초기화 | window.kakao.maps 존재 여부 확인 후 load(), city-map/ai-map 컨테이너에 Map 생성, 옵션(center, level) 적용 | window.kakao (index.html 스크립트) | - | 시스템/BE |
| RE-S04 | CCTV CSV 로드 및 파싱 | 서울시 CCTV 목록 로드 | fetch('/cctv_seoul.csv') → arrayBuffer → TextDecoder('euc-kr' 또는 'utf-8') → parseCctvCsv(text, 2000) → setCameras. 실패 시 FALLBACK_CAMERAS 유지 | csvUrl, camerasRef | - | 시스템/BE |
| RE-S05 | CSV 파싱 규칙(parseCctvCsv) | CSV에서 CCTV 항목 추출 | 헤더에서 소재지도로명주소·소재지지번주소 인덱스 탐색, 각 행에서 위경도 정규식 매칭(서울 범위), 라벨은 도로명→지번 순, 최대 maxItems개 반환 | csvText, maxItems | - | 시스템/BE |
| RE-S06 | 위경도·거리 계산 | 거리 기반 CCTV 선정 | getDistanceMeters(Haversine), findNearestCCTVs(거리순 정렬 후 상위 n개). 서울 범위는 parseCctvCsv 내부 상수 사용 | lat, lng, camList, n | - | 시스템/BE |
| RE-S07 | 지도 클릭 → 지점 선택 적용 | 클릭 좌표로 9대 선정·원·표시 | 지도 click 이벤트에서 latLng 추출, applySelectionAtLatLng(lat,lng): 리플 픽셀 계산·nearest9 계산·clearSearchOverlays·Circle 생성·selectedCctvIds/displayedCameraIds 설정·기존 results에 cctvId 배정(nearest9[i%9]) | mapRef, camerasRef, results | - | 시스템/BE |
| RE-S08 | 감지 스트림 카드 클릭 → CCTV 재중심 | 선택한 감지의 CCTV를 새 중심으로 9개 재선정 | handleResultClick(res): res.cctvId로 CCTV 조회, applySelectionAtLatLng(cctv.lat, cctv.lng), setViewMode('map'), map.panTo(해당 CCTV) | res.cctvId, camerasRef, mapRef | - | 시스템/BE |
| RE-S09 | 보이는 지도 범위 내 CCTV 필터 | 버튼 클릭 시 현재 뷰포트 내만 표시 | showCctvInVisibleBounds: map.getBounds() → getSouthWest/getNorthEast, camerasRef.current에서 lat/lng 범위 내만 필터 → setDisplayedCameraIds | mapRef, camerasRef | - | 시스템/BE |
| RE-S10 | 지도 좌표↔픽셀 동기화 | 줌/이동 시 마커 위치 갱신 | zoom_changed/center_changed/bounds_changed 시 updatePixelPositions(map, camList): projection으로 위경도→컨테이너 픽셀 변환, setMarkerPixels, setMapLevel | mapRef, camList | - | 시스템/BE |
| RE-S11 | Ctrl+백틱 지도/CCTV 뷰 전환 | 키보드로 뷰 모드 토글 | keydown에서 ctrlKey+백틱(Backquote) 시 setViewMode 토글, preventDefault | viewMode | - | 시스템/BE |
| RE-S12 | 검색/초기화 시 오버레이 정리 | 새 분석 시 이전 선택·원 제거 | clearSearchOverlays: circleRef 제거, setSelectedCctvIds(new Set), setDisplayedCameraIds(new Set), setViewMode('map'). handleSearch에서 호출 | circleRef, selectedCctvIds, displayedCameraIds | - | 시스템/BE |
| RE-S13 | 실시간 로그 시뮬레이션 | 5초마다 가짜 이벤트 추가 | setInterval 5초마다 새 log 객체 생성(랜덤 번호판·위치·type), setLogs(prev=>[newLog,...prev].slice(0,20)) | logs | - | 시스템/BE |
| RE-P01 | 로그인 제출 지연 | 제출 후 1.5초 대기 후 진입 | setTimeout 1500ms으로 API 지연 시뮬레이션, 그동안 버튼 비활성·스피너로 대기 표시 | - | - | 성능 |
| RE-P02 | 감지 스트림 결과 제한 | 스트림 카드 수 상한 | (현재 상한 미적용, addResult 3회만 호출. 추후 대량 시 slice 등으로 제한 가능) | - | - | 성능 |
| RE-P03 | 실시간 로그 목록 상한 | 이벤트 로그 최대 20건 유지 | setLogs 시 .slice(0, 20)으로 상한 적용하여 무한 증가 방지 | - | - | 성능 |
| RE-P04 | 카카오 지도 SDK 부재 시 방어 | SDK 미로드 시 크래시 방지 | CityOverview/AIInvestigation에서 !window.kakao?.maps 시 early return 또는 console.warn 후 렌더 계속 | window.kakao | - | 성능 |
